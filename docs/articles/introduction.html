<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to hansard • hansard</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90706059-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">hansard</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="http://evanodell.com">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://evanodell.com/packages">Packages Home</a>
    </li>
    <li class="divider">
    <li>
      <a href="http://evanodell.com/hansard">hansard</a>
    </li>
    <li>
      <a href="http://evanodell.com/mnis">mnis</a>
    </li>
    <li>
      <a href="http://evanodell.com/parlitools">parlitools</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EvanOdell/hansard">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to hansard</h1>
                        <h4 class="author">Evan Odell</h4>
            
            <h4 class="date">2017-05-01</h4>
          </div>

    
    
<div class="contents">
<p><code>hansard</code> is an R package to pull data from the UK parliament through the <a href="http://www.data.parliament.uk/" class="uri">http://www.data.parliament.uk/</a> API. It emphasises simplicity and ease of use, so that users unfamiliar with APIs can easily retrieve large volumes of high quality data. Each function accepts a single argument at a time, and functions that require additional information to retrieve the data you requested will ask for it after you execute the function. Functions retrieve data in json format and convert it to a data frame. The <code>hansard_generic</code> function supports the building of API requests for XML, csv or HTML formats if required. Note that the API is rate limited to returning 5500 rows per request in some circumstances.</p>
<div id="installing-hansard" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-hansard" class="anchor"></a>Installing hansard</h2>
<div id="from-cran" class="section level3">
<h3 class="hasAnchor">
<a href="#from-cran" class="anchor"></a>From CRAN</h3>
<pre><code>install.packages("hansard")`</code></pre>
</div>
<div id="from-github-development-version" class="section level3">
<h3 class="hasAnchor">
<a href="#from-github-development-version" class="anchor"></a>From GitHub (Development Version)</h3>
<pre><code>install.packages("devtools")
devtools::install_github("EvanOdell/hansard")</code></pre>
</div>
<div id="load-hansard" class="section level3">
<h3 class="hasAnchor">
<a href="#load-hansard" class="anchor"></a>Load hansard</h3>
<pre><code>library(hansard)</code></pre>
</div>
</div>
<div id="using-hansard" class="section level2">
<h2 class="hasAnchor">
<a href="#using-hansard" class="anchor"></a>Using hansard</h2>
<p><code>hansard</code> contains functions for calling data for the UK Parliament API. Most of the functions are designed to call data from a specific <a href="http://www.data.parliament.uk/" class="uri">http://www.data.parliament.uk/</a> API, but several functions have special or experimental features:</p>
<ul>
<li><p><code>research_briefings_lists</code> An experimental feature that creates lists of possible parameters, and allows the user to call to the API based on the content of the list. Currently only available with the <code>research_briefings_lists</code> function.</p></li>
<li><p><code>hansard_generic</code> A basic wrapper function for any of the available APIs. Users must specify the exact path they want the function to call from, and must also specify JSON formatting.</p></li>
<li><p><code>members_search</code> A search function for members of the House of Commons and House of Lords.</p></li>
</ul>
<div id="the-members_search-function" class="section level3">
<h3 class="hasAnchor">
<a href="#the-members_search-function" class="anchor"></a>The <code>members_search</code> function</h3>
<p>Looking up information on an individual MP or Lord through the Parliamentary API requires knowing their parliamentary ID number. This can be hard to find on the web, but luckily you can look it up through the API. We want information on the voting record of the Labour MP for Hackney North and Stoke Newington Diane Abbott, but we don’t know her ID number, so we search for her:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(hansard)
<span class="kw"><a href="../reference/members_search.html">members_search</a></span>(<span class="st">"abbot"</span>)
<span class="co">#&gt; Connecting to API</span>
<span class="co">#&gt; Retrieving page 1 of 1</span>
<span class="co">#&gt;     mnis_id                         home_page additional_name_value                         constituency_about</span>
<span class="co">#&gt; 1     172     http://www.dianeabbott.org.uk                 Julie http://data.parliament.uk/resources/146966</span>
<span class="co">#&gt; 2    1651                              &lt;NA&gt;             Granville                                       &lt;NA&gt;</span>
<span class="co">#&gt; 3    4249 http://www.annemariemorris.co.uk/                  &lt;NA&gt; http://data.parliament.uk/resources/147092</span>
<span class="co">#&gt; 4    3827       http://www.judiciary.gov.uk                Edmond                                       &lt;NA&gt;</span>
<span class="co">#&gt;            constituency_label_value family_name_value                full_name_value gender_value</span>
<span class="co">#&gt; 1 Hackney North and Stoke Newington            Abbott                Ms Diane Abbott       Female</span>
<span class="co">#&gt; 2                              &lt;NA&gt;           Hodgson Lord Hodgson of Astley Abbotts         Male</span>
<span class="co">#&gt; 3                      Newton Abbot            Morris              Anne Marie Morris       Female</span>
<span class="co">#&gt; 4                              &lt;NA&gt;         Neuberger   Lord Neuberger of Abbotsbury         Male</span>
<span class="co">#&gt;   given_name_value                                              label_value  party_value</span>
<span class="co">#&gt; 1            Diane                Biography information for Ms Diane Abbott       Labour</span>
<span class="co">#&gt; 2            Robin Biography information for Lord Hodgson of Astley Abbotts         &lt;NA&gt;</span>
<span class="co">#&gt; 3       Anne Marie              Biography information for Anne Marie Morris Conservative</span>
<span class="co">#&gt; 4            David   Biography information for Lord Neuberger of Abbotsbury         &lt;NA&gt;</span>
<span class="co">#&gt;                       twitter_value</span>
<span class="co">#&gt; 1 https://twitter.com/HackneyAbbott</span>
<span class="co">#&gt; 2                              &lt;NA&gt;</span>
<span class="co">#&gt; 3    https://twitter.com/AMMorrisMP</span>
<span class="co">#&gt; 4                              &lt;NA&gt;</span></code></pre></div>
<p>The same function, without the use of the tidy parameter, illustrating the differences in the variable names and the presentation of information in the first column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(hansard)
<span class="kw"><a href="../reference/members_search.html">members_search</a></span>(<span class="st">"abbot"</span>, <span class="dt">tidy =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; Connecting to API</span>
<span class="co">#&gt; Retrieving page 1 of 1</span>
<span class="co">#&gt;                                   _about                          homePage additionalName._value</span>
<span class="co">#&gt; 1  http://data.parliament.uk/members/172     http://www.dianeabbott.org.uk                 Julie</span>
<span class="co">#&gt; 2 http://data.parliament.uk/members/1651                              &lt;NA&gt;             Granville</span>
<span class="co">#&gt; 3 http://data.parliament.uk/members/4249 http://www.annemariemorris.co.uk/                  &lt;NA&gt;</span>
<span class="co">#&gt; 4 http://data.parliament.uk/members/3827       http://www.judiciary.gov.uk                Edmond</span>
<span class="co">#&gt;                          constituency._about         constituency.label._value familyName._value                fullName._value</span>
<span class="co">#&gt; 1 http://data.parliament.uk/resources/146966 Hackney North and Stoke Newington            Abbott                Ms Diane Abbott</span>
<span class="co">#&gt; 2                                       &lt;NA&gt;                              &lt;NA&gt;           Hodgson Lord Hodgson of Astley Abbotts</span>
<span class="co">#&gt; 3 http://data.parliament.uk/resources/147092                      Newton Abbot            Morris              Anne Marie Morris</span>
<span class="co">#&gt; 4                                       &lt;NA&gt;                              &lt;NA&gt;         Neuberger   Lord Neuberger of Abbotsbury</span>
<span class="co">#&gt;   gender._value givenName._value                                             label._value party._value</span>
<span class="co">#&gt; 1        Female            Diane                Biography information for Ms Diane Abbott       Labour</span>
<span class="co">#&gt; 2          Male            Robin Biography information for Lord Hodgson of Astley Abbotts         &lt;NA&gt;</span>
<span class="co">#&gt; 3        Female       Anne Marie              Biography information for Anne Marie Morris Conservative</span>
<span class="co">#&gt; 4          Male            David   Biography information for Lord Neuberger of Abbotsbury         &lt;NA&gt;</span>
<span class="co">#&gt;                      twitter._value</span>
<span class="co">#&gt; 1 https://twitter.com/HackneyAbbott</span>
<span class="co">#&gt; 2                              &lt;NA&gt;</span>
<span class="co">#&gt; 3    https://twitter.com/AMMorrisMP</span>
<span class="co">#&gt; 4                              &lt;NA&gt;</span></code></pre></div>
<p>The search function is not case sensitive, and searchs in the names and constituencies of all MPs and Lords. So even though we spelled her surname incorrectly, we can still find her. This API provides limited biographical details, to retrieve more detailed biographical information, use the related <a href="https://cran.r-project.org/package=mnis"><code>mnis</code></a> package to retrives data from the Members’ Names Information Service.</p>
</div>
<div id="the-commons_divisions-and-mp_vote_record-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#the-commons_divisions-and-mp_vote_record-functions" class="anchor"></a>The <code>commons_divisions</code> and <code>mp_vote_record</code> functions</h3>
<p>The <code>commons_divisions</code> function returns divisions in the House of Commons, including the result of votes and information on what we being voted on. <code>mp_vote_record</code> returns a data frame the voting record of a given MP on each division they voted in. The example below returns all Commons Divisions where Diane Abbott voted aye.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mp_vote_record.html">mp_vote_record</a></span>(<span class="dv">172</span>, <span class="st">"aye"</span>)
<span class="co">#&gt; Retrieving page 1 of 4</span>
<span class="co">#&gt; Retrieving page 2 of 4</span>
<span class="co">#&gt; Retrieving page 3 of 4</span>
<span class="co">#&gt; Retrieving page 4 of 4</span>
<span class="co">#&gt; head(x)</span>
<span class="co">#&gt; # A tibble: 6 × 5</span>
<span class="co">#&gt;                                         about                                                   title               uin</span>
<span class="co">#&gt;                                       &lt;chr&gt;                                                   &lt;chr&gt;             &lt;chr&gt;</span>
<span class="co">#&gt; 1 http://data.parliament.uk/resources/714865 Pension Schemes Bill [Lords]: Report Stage New Clause 2 CD:2017-03-29:260</span>
<span class="co">#&gt; 2 http://data.parliament.uk/resources/714866 Pension Schemes Bill [Lords]: Report Stage New Clause 1 CD:2017-03-29:259</span>
<span class="co">#&gt; 3 http://data.parliament.uk/resources/714868  Pension Schemes Bill [Lords]: Report Stage Amendment 1 CD:2017-03-29:261</span>
<span class="co">#&gt; 4 http://data.parliament.uk/resources/713962    Bus Services Bill [Lords]: Report Stage New Clause 1 CD:2017-03-27:255</span>
<span class="co">#&gt; 5 http://data.parliament.uk/resources/713963    Bus Services Bill [Lords]: Report Stage New Clause 2 CD:2017-03-27:256</span>
<span class="co">#&gt; 6 http://data.parliament.uk/resources/714005     Bus Services Bill [Lords]: Report Stage Amendment 1 CD:2017-03-27:257</span>
<span class="co">#&gt; # ... with 2 more variables: date_value &lt;date&gt;, date_datatype &lt;fctr&gt;</span>
<span class="op">&gt;</span><span class="st"> </span></code></pre></div>
<p>The results of votes in the House of Lords can be retrieved with the <code>lords_divisions</code> function. The voting record of individual Lords can be retrieved using the <code>lords_vote_record</code> functions.</p>
</div>
<div id="the-research_briefings-function" class="section level3">
<h3 class="hasAnchor">
<a href="#the-research_briefings-function" class="anchor"></a>The <code>research_briefings</code> function</h3>
<p>The <code>research_briefings</code> function includes the experimental feature of requesting data using lists created using the <code>research_briefings_lists</code> functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; research_topics_list &lt;- research_topics_list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; research_subtopics_list &lt;- research_subtopics_list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; research_types_list &lt;- research_types_list()</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; research_topics_list[[7]]</span>
<span class="co">#&gt; [1] "Defence"</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; research_subtopics_list[[7]][10]</span>
<span class="co">#&gt; [1] "Falkland Islands"</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; research_types_list[[1]]</span>
<span class="co">#&gt; [1] "Lords Library notes"</span></code></pre></div>
<p>In this case I have given them the same name as their function, but you can assign any name you wish to them.</p>
<p>Having created the lists, they can be used to specify which topics and subtopics to call, although strings can also be used.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; x &lt;- research_briefings(topic = research_topics_list[[7]])</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; x &lt;- research_briefings(topic = research_topics_list[[7]], subtopic=research_subtopics_list[[7]][10])</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; x &lt;- research_briefings(topic = "Defence")</span></code></pre></div>
<p>If a specific subtopic is called, but the topic is not specified, the function will still return all data within that specific subtopic. Note that this is slower than specifying the topic and subtopic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; x &lt;- research_briefings(subtopic = research_subtopics_list[[7]][10])</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; x &lt;- research_briefings(subtopic = "Falkland Islands")</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; system.time(without_topic &lt;- research_briefings(subtopic = research_subtopics_list[[7]][10]))</span>
<span class="co">#&gt; Retrieving page 1 of 1</span>
<span class="co">#&gt;   user  system elapsed </span>
<span class="co">#&gt;   1.12    2.59    4.71 </span>
<span class="co">#&gt;</span>
<span class="co">#&gt; system.time(with_topic &lt;- research_briefings(topic = research_topics_list[[7]], subtopic=research_subtopics_list[[7]][10]))</span>
<span class="co">#&gt; Retrieving page 1 of 1</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;    0.47    1.31    1.89 </span>
<span class="co">#&gt;</span>
<span class="co">#&gt; all.equal(with_topic, without_topic)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>If a specified subtopic is not a subtopic of the specified topic, the function will not return any data.</p>
</div>
<div id="the-hansard_generic-function" class="section level3">
<h3 class="hasAnchor">
<a href="#the-hansard_generic-function" class="anchor"></a>The <code>hansard_generic</code> function</h3>
<p>The <code>hansard_generic</code> function allows you to put in your own paths to the API. Information on all the paths available in the API can be found on the <a href="http://explore.data.parliament.uk/">DDP Explorer website</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/hansard_generic.html">hansard_generic</a></span>(<span class="st">"commonsansweredquestions.json"</span>)</code></pre></div>
<p>Note that the API defaults to returning 10 items per page, but allows up to 500 items per page.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installing-hansard">Installing hansard</a></li>
      <li><a href="#using-hansard">Using hansard</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Evan Odell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
